(self.webpackChunkemp_home=self.webpackChunkemp_home||[]).push([[509],{4800:function(e,t,n){"use strict";n.r(t),n.d(t,{frontMatter:function(){return o},contentTitle:function(){return p},metadata:function(){return m},toc:function(){return d},default:function(){return k}});var a=n(2122),i=n(9756),l=(n(7294),n(3905)),r=["components"],o={},p="How to use & What we do",m={unversionedId:"guide/HowAndWhat",id:"guide/HowAndWhat",isDocsHomePage:!1,title:"How to use & What we do",description:"\u5fae\u524d\u7aef\u5305 or cli",source:"@site/docs/guide/HowAndWhat.md",sourceDirName:"guide",slug:"/guide/HowAndWhat",permalink:"/home/docs/guide/HowAndWhat",version:"current",frontMatter:{},sidebar:"pluginsSidebar",next:{title:"EMP - Micro Frontends solution",permalink:"/home/docs/guide/README"}},d=[{value:"\u5fae\u524d\u7aef\u5305 or cli",id:"\u5fae\u524d\u7aef\u5305-or-cli",children:[]},{value:"\u529f\u80fd\u6e05\u5355",id:"\u529f\u80fd\u6e05\u5355",children:[]},{value:"\u9879\u76ee\u6307\u4ee4",id:"\u9879\u76ee\u6307\u4ee4",children:[]},{value:"\u8c03\u8bd5 antd",id:"\u8c03\u8bd5-antd",children:[]},{value:"emp-config.js \u914d\u7f6e\u89c4\u8303",id:"emp-configjs-\u914d\u7f6e\u89c4\u8303",children:[]},{value:"TS \u7c7b\u578b\u6587\u4ef6",id:"ts-\u7c7b\u578b\u6587\u4ef6",children:[]}],u={toc:d};function k(e){var t=e.components,n=(0,i.Z)(e,r);return(0,l.kt)("wrapper",(0,a.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,l.kt)("h1",{id:"how-to-use--what-we-do"},"How to use & What we do"),(0,l.kt)("h2",{id:"\u5fae\u524d\u7aef\u5305-or-cli"},"\u5fae\u524d\u7aef\u5305 or cli"),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"emp-cli \u8be6\u7ec6\u6587\u6863 ",(0,l.kt)("a",{parentName:"p",href:"/home/docs/guide/README"},"\u70b9\u51fb")),(0,l.kt)("ul",{parentName:"blockquote"},(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"@efox/emp-cli")," \u6784\u5efa\u9879\u76ee\u3001\u8c03\u8bd5\u9879\u76ee\u3001\u751f\u6210\u9879\u76ee\u811a\u624b\u67b6\u3001\u652f\u6301\u8fdc\u7a0b\u4e0b\u8f7d d.ts ",(0,l.kt)("inlineCode",{parentName:"li"},"\u5b8c\u6210")," "),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"@efox/emp-tsconfig")," \u9ed8\u8ba4ts\u914d\u7f6e"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"@efox/eslint-config-react-prittier-ts")," \u7edf\u4e00eslint \u914d\u7f6e ",(0,l.kt)("inlineCode",{parentName:"li"},"\u5b8c\u6210")),(0,l.kt)("li",{parentName:"ul"},"[*]"," \u9879\u76ee\u751f\u6210\u5168\u5c40 d.ts ",(0,l.kt)("inlineCode",{parentName:"li"},"\u533a\u5206js \u4e0e ts \u9879\u76ee \u4e0d\u9ed8\u8ba4\u751f\u6210 \u9700\u8981\u989d\u5916\u6307\u4ee4")," ",(0,l.kt)("inlineCode",{parentName:"li"},"\u5b8c\u6210")),(0,l.kt)("li",{parentName:"ul"},"[*]"," \u540c\u6b65\u8fdc\u7a0b\u5e93\u7c7b\u578b \u5230 \u5f53\u524d\u9879\u76ee d.ts ",(0,l.kt)("inlineCode",{parentName:"li"},"\u5b8c\u6210")," "),(0,l.kt)("li",{parentName:"ul"},"\u589e\u52a0\u6a21\u677f\u5de5\u7a0b ",(0,l.kt)("inlineCode",{parentName:"li"},"TODO")))),(0,l.kt)("h2",{id:"\u529f\u80fd\u6e05\u5355"},"\u529f\u80fd\u6e05\u5355"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u652f\u6301\u8fdc\u7a0b \u5f02\u6b65\u8c03\u7528 ",(0,l.kt)("inlineCode",{parentName:"li"},"\u5b8c\u6210")),(0,l.kt)("li",{parentName:"ul"},"\u652f\u6301\u8c03\u8bd5\u6a21\u5f0f ",(0,l.kt)("inlineCode",{parentName:"li"},"\u5b8c\u6210")," "),(0,l.kt)("li",{parentName:"ul"},"[*]","\u652f\u6301\u4e2d\u53f0 antd + react + sass + less \u914d\u7f6e ",(0,l.kt)("inlineCode",{parentName:"li"},"\u5b8c\u6210"),"  "),(0,l.kt)("li",{parentName:"ul"},"[*]","\u589e\u52a0\u5168\u5c40store \u6ce8\u518c\u65b9\u6cd5 ",(0,l.kt)("inlineCode",{parentName:"li"},"\u5b8c\u6210")," "),(0,l.kt)("li",{parentName:"ul"},"[*]","\u4f18\u5316webpack5 \u914d\u7f6e ",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"~~\u91cd\u5199 emp-cli \u914d\u7f6e\u540e\u6709\u53ef\u80fd\u4f1a\u5bfc\u81f4 \u6784\u5efa\u95ee\u9898 ~~"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("del",{parentName:"li"},"\u8003\u8651\u5173\u95ed\u7c7b\u578b\u68c0\u6d4b  \u907f\u514d\u6784\u5efa\u8fc7\u6162 ",(0,l.kt)("inlineCode",{parentName:"del"},"webpack5 cache \u6784\u5efa antd \u95ee\u9898"))," "),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("del",{parentName:"li"},"\u652f\u6301\u5e93\u6587\u4ef6 external ",(0,l.kt)("inlineCode",{parentName:"del"},"react react-router react-dom")," shared \u53ea\u80fd\u6392\u5e8f\u672c\u9879\u76ee\u7684\u5e93\u4f9d\u8d56 \u6ca1\u8d77\u5230 \u72ec\u7acb\u5f15\u7528\u7684\u6548\u679c ",(0,l.kt)("inlineCode",{parentName:"del"},"\u9ed8\u8ba4\u652f\u6301"))),(0,l.kt)("li",{parentName:"ul"},"html \u52a0\u5165 process \u53d8\u91cf \u9002\u914d \u90e8\u7f72\u73af\u5883 ",(0,l.kt)("inlineCode",{parentName:"li"},"\u5b8c\u6210")," "),(0,l.kt)("li",{parentName:"ul"},"\u628a public \u6536\u5230 emp-cli ",(0,l.kt)("inlineCode",{parentName:"li"},"\u5b8c\u6210")," "),(0,l.kt)("li",{parentName:"ul"},"html \u652f\u6301\u81ea\u52a8\u5f15\u5165\u5230\u9879\u76ee ",(0,l.kt)("inlineCode",{parentName:"li"},"\u5b8c\u6210")),(0,l.kt)("li",{parentName:"ul"},"\u589e\u52a0 webpack-bundle-analyzer ",(0,l.kt)("inlineCode",{parentName:"li"},"emp build --analyze")," \u5206\u6790\u529f\u80fd ",(0,l.kt)("inlineCode",{parentName:"li"},"\u5b8c\u6210")," ",(0,l.kt)("a",{parentName:"li",href:"/home/docs/guide/README"},"\u70b9\u51fb\u67e5\u770b")," "),(0,l.kt)("li",{parentName:"ul"},"\u89e3\u51b3\u4f53\u79ef\u8fc7\u5927\u95ee\u9898 ",(0,l.kt)("inlineCode",{parentName:"li"},"\u5b8c\u6210")," "),(0,l.kt)("li",{parentName:"ul"},"\u89e3\u51b3webpack \u6587\u4ef6\u7f13\u5b58\u91cd\u5199\u95ee\u9898 ",(0,l.kt)("inlineCode",{parentName:"li"},"TODO")," "),(0,l.kt)("li",{parentName:"ul"},"[*]","\u652f\u6301\u70ed\u66f4\u65b0 ",(0,l.kt)("inlineCode",{parentName:"li"},"\u5b8c\u6210")," ",(0,l.kt)("a",{parentName:"li",href:"https://github.com/pmmmwh/react-refresh-webpack-plugin/issues"},"\u95ee\u9898\u5904\u7406"),"   "),(0,l.kt)("li",{parentName:"ul"},"[*]","mf \u5728 exposes \u5bfc\u51fa\u6587\u4ef6\u4e0b \u70ed\u66f4\u62a5\u9519 ",(0,l.kt)("inlineCode",{parentName:"li"},"TODO")),(0,l.kt)("li",{parentName:"ul"},"[*]","\u8fdc\u7a0b\u5e93 ",(0,l.kt)("inlineCode",{parentName:"li"},"ForkTsCheckerWebpackPlugin")," \u68c0\u6d4b\u5931\u8d25 ",(0,l.kt)("inlineCode",{parentName:"li"},"\u5b8c\u6210"),"  "),(0,l.kt)("li",{parentName:"ul"},"\u53d6\u6d88bootstrap \u6587\u4ef6\u5bfc\u5165\u65b9\u6848 ",(0,l.kt)("inlineCode",{parentName:"li"},"TODO \u63a2\u8ba8\u4e2d...")," "),(0,l.kt)("li",{parentName:"ul"},"\u975e module federation \u6a21\u5f0f\u4e0b \u907f\u514d\u51fa\u73b0 mf\u914d\u7f6e ",(0,l.kt)("inlineCode",{parentName:"li"},"\u5b8c\u6210"),"  ")))),(0,l.kt)("h2",{id:"\u9879\u76ee\u6307\u4ee4"},"\u9879\u76ee\u6307\u4ee4"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"npm i -g lerna")," \u5b89\u88c5lerna \u4f9d\u8d56   "),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"lerna bootstrap")," \u5b89\u88c5\u9879\u76ee\u4f9d\u8d56  "),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"cd projects && yarn build && yarn start")," \u542f\u52a8\u6240\u6709 @emp \u9879\u76ee  "),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"cd projects/[\u9879\u76ee\u540d\u79f0] && lerna add @efox/emp-cli")," \u5b89\u88c5\u547d\u4ee4\u884c  "),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"cd projects/[\u9879\u76ee\u540d\u79f0] && lerna add @efox/emp-tsconfig")," \u5b89\u88c5ts\u4f9d\u8d56 "),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"cd projects/[\u9879\u76ee\u540d\u79f0] && yarn add @efox/eslint-config-react-prittier-ts")," \u5b89\u88c5 eslint \u4f9d\u8d56 ")),(0,l.kt)("h2",{id:"\u8c03\u8bd5-antd"},"\u8c03\u8bd5 antd"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"cd projects && yarn build:antd && yarn start:antd"))),(0,l.kt)("h2",{id:"emp-configjs-\u914d\u7f6e\u89c4\u8303"},"emp-config.js \u914d\u7f6e\u89c4\u8303"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-javascript"},"module.exports = ({config, env}) => {\n  // config \u4e3a webpack-chain \u53d8\u91cf \u5177\u4f53\u53c2\u8003 https://github.com/neutrinojs/webpack-chain\n  // env \u6784\u5efa\u73af\u5883\u53d8\u91cf\n  config.plugin('html').tap(...) // HtmlWebpackPlugin \u914d\u7f6e\n  config.plugin('mf').tap(...) // ModuleFederationPlugin \u914d\u7f6e\n  config.output.publicPath(...)\n  config.devServer.port(...)\n}\n\n")),(0,l.kt)("h2",{id:"ts-\u7c7b\u578b\u6587\u4ef6"},"TS \u7c7b\u578b\u6587\u4ef6"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u901a\u8fc7 ",(0,l.kt)("inlineCode",{parentName:"li"},"emp tsc")," \u521b\u5efa\u5f53\u524d\u9879\u76ee\u7684 index.d.ts \u6587\u4ef6\u5230 dist/ \u76ee\u5f55 "),(0,l.kt)("li",{parentName:"ul"},"\u901a\u8fc7 ",(0,l.kt)("inlineCode",{parentName:"li"},"emp tss [remote-url] -n [\u7c7b\u578b\u540d].d.ts")," \u540c\u6b65\u5230 \u5f53\u524d\u5e94\u7528\u76ee\u5f55 src/"),(0,l.kt)("li",{parentName:"ul"},"\u901a\u8fc7 VSCode \u63d2\u4ef6 ",(0,l.kt)("a",{parentName:"li",href:"https://marketplace.visualstudio.com/items?itemName=Benny.emp-sync-base"},"emp-sync-base")," \u5b9e\u65f6\u540c\u6b65\u5230 \u5f53\u524d\u5e94\u7528\u76ee\u5f55 src/")))}k.isMDXComponent=!0}}]);